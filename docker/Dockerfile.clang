FROM ubuntu:precise

RUN apt-get update \
        && apt-get install -y --no-install-recommends \
                clang \
                elfutils \
                make \
                autoconf \
                gperf \
                zlib1g-dev \
        && rm -rf /var/lib/apt/lists/*

WORKDIR /tmp/build

COPY . .

ENV CC clang

RUN ./autogen.sh \
        && ./configure \
        && make \
        && make test
